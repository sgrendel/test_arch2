<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Тест на определение Архетипа</title>
    <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@400;700&display=swap" rel="stylesheet">

<style>
    /* Общий стиль */
    body {
        font-family: 'Raleway', sans-serif;
        margin: 0;
        padding: 0;
        background: linear-gradient(180deg, #FFD1DC, #C3E8FF);
        display: flex;
        flex-direction: column;
        align-items: center;
        min-height: 100vh;
    }

    h1 {
        font-size: 2.5rem;
        margin-top: 20px;
        text-align: center;
        color: #2F4F4F;
    }

    .intro, .test-description {
        font-size: 1.2rem;
        line-height: 1.8;
        text-align: justify;
        margin-bottom: 1rem;
        width: 90%;
        max-width: 650px;
    }

    .start-btn {
        display: inline-block;
        background-color: #FFB6C1;
        color: #fff;
        text-decoration: none;
        font-size: 1.5rem;
        font-weight: 700;
        padding: 15px 30px;
        border-radius: 30px;
        transition: background-color 0.3s ease;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        margin-bottom: 20px;
        border: none;
    }

    .start-btn:hover {
        background-color: #FFA6B8;
    }

 /* Стиль для модального окна */
.overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    display: none; /* Скрыто до нажатия кнопки */
    justify-content: center;
    align-items: center;
    z-index: 10;
    overflow-y: auto; /* Прокрутка для всего окна */
}

/* Карточка теста */
.test-card {
    background: #fff;
    border-radius: 20px;
    padding: 40px;
    width: 100%;
    max-width: 900px;
    max-height: 90vh; /* Ограничиваем высоту карточки */
    overflow-y: auto; /* Прокрутка внутри карточки */
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
    text-align: center;
    position: relative;
}

    /* Вопросы */
 .question {
    position: relative;
    padding-top: 0; /* Убираем внутренний отступ сверху */
}

.question:not(:first-child) {
    margin-top: 5px; /* Отступ только между вопросами */
    padding-top: 10px; /* Можно добавить, если требуется */
}

.question:not(:first-child)::before {
    content: '';
    position: absolute;
    top: 0;
    left: 5%; /* Отступ от левого края */
    width: 90%; /* Линия занимает 90% ширины контейнера */
    height: 1px; /* Толщина линии */
    background-color: #ddd; /* Цвет линии */
}


    .question > div:first-child {
        font-size: 1.2rem; /* Размер текста вопросов */
        font-weight: 400; /* Обычный шрифт */
        margin-bottom: 10px;
    }

    /* Варианты ответа */
  .options {
    display: flex;
    justify-content: space-evenly; /* Равномерное распределение */
    gap: 5px; /* Уменьшенный промежуток между вариантами */
    flex-wrap: wrap; /* Перенос на новую строку при необходимости */
    max-width: 700px; /* Ограничиваем ширину контейнера */
    margin: 0 auto; /* Центрируем контейнер */
}

    .option {
    display: flex;
    flex-direction: column;
    align-items: center;
    cursor: pointer;
    margin: 5px;
    padding: 10px; /* Пространство внутри рамки */
    border: 2px solid transparent; /* Изначально рамка прозрачная */
    border-radius: 10px; /* Скруглённые края */
    transition: border-color 0.3s ease;
    }
    
    .option.selected {
        border-color: #FFA6B8; /* Розовый цвет рамки */
    }


    .option div:first-child {
        font-size: 1.5rem; /* Размер смайлика */
        filter: grayscale(100%); /* Черно-белый эффект для смайликов */
        transition: filter 0.3s ease; /* Плавный переход на цветной */
    }

    .option.selected div:first-child {
        filter: none; /* Убираем черно-белый фильтр для выбранного */
    }

    .option span {
        font-size: 0.8rem; /* Размер подписи */
    }

  
    /* Кнопки */
    .buttons {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 20px;
    }

    .button {
        background-color: #FFB6C1;
        color: #fff;
        font-size: 1rem;
        font-weight: 700;
        padding: 10px 20px;
        border-radius: 20px;
        border: none;
        cursor: pointer;
        transition: background-color 0.3s ease;
    }

    .button:disabled {
        background-color: #ccc;
        cursor: not-allowed;
    }

    .button:hover:not(:disabled) {
        background-color: #FFA6B8;
    }

    /* Счётчик страниц */
    .page-counter {
        font-size: 1rem;
        color: #666;
        margin-top: 10px;
        text-align: center;
        flex: 1;
    }

@media (max-width: 768px) {
    .test-card {
        padding: 20px; /* Уменьшаем отступы внутри карточки */
    }

       .buttons {
        flex-wrap: nowrap; /* На маленьких экранах кнопки остаются на одной строке */
    }

    .buttons .button {
        flex: none; /* Кнопки занимают только свою ширину */
        width: auto; /* Автоматическая ширина */
    }

    .buttons {
        justify-content: space-around; /* Увеличиваем расстояние между кнопками */
    }

    .page-counter {
        order: 1; /* Счётчик переносится под кнопки */
        width: 100%;
    }

    .options {
        justify-content: center; /* Центрируем варианты */
        gap: 5px; /* Уменьшаем расстояние между вариантами */
    }

    .option {
        margin: 3px; /* Уменьшаем внешний отступ */
        padding: 5px; /* Уменьшаем внутренний отступ */
    }

    .option div:first-child {
        font-size: clamp(1rem, 4vw, 1.5rem); /* Адаптивный размер смайликов */
    }

    .option span {
        font-size: clamp(0.6rem, 2.5vw, 0.8rem); /* Адаптивный размер подписи */
    }
}


    @media (max-width: 480px) {
    .buttons {
        flex-direction: column; /* На очень маленьких экранах кнопки становятся вертикально */
        align-items: center; /* Центрируем кнопки */
        gap: 10px; /* Отступы между кнопками */
    }

    .page-counter {
        order: 1; /* Перемещаем счётчик выше кнопок */
    }
}
</style>

    
</head>

    
<body>
   <p></p>
    <h1>Определи свой Архетип!</h1>
    <div class="intro">
        <p>Архетипы — это универсальные образы и сценарии, живущие в каждом из нас. Они определяют наши мотивы, выборы и способы взаимодействия с миром. Зная свой архетип, вы сможете понять, что вдохновляет вас и как лучше реализовать свой потенциал.</p>
    </div>
    <div class="test-description">
        <p>Наш тест включает 48 вопросов, которые помогут раскрыть ваши глубинные архетипы. Готовы? Начнём прямо сейчас!</p>
    </div>
    <button class="start-btn" onclick="startTest()">Начать тест</button>

    <div class="overlay" id="test-overlay">
        <div class="test-card">
            <div id="questions-container"></div>
            <div class="buttons">
                <button class="button" id="prev-button" disabled>Назад</button>
                <span class="page-counter">Страница <span id="page-number">1</span> из 12</span>
                <button class="button" id="next-button" disabled>Далее</button>
                <button class="button" id="result-button" style="display: none;" disabled>Получить результат</button>
            </div>
        </div>
    </div>

    <script>
        const archetypes = [
            "Маг",
            "Славный малый",
            "Дитя",
            "Искатель",
            "Творец",
            "Герой",
            "Бунтарь",
            "Любовник",
            "Шут",
            "Опекун",
            "Правитель",
            "Мудрец",
        ];

     const questions = [
    // Маг
    { text: "Я верю, что могу влиять на свою судьбу.", archetype: "Маг" },
    { text: "Мне нравится помогать другим людям видеть скрытые возможности.", archetype: "Маг" },
    { text: "Я люблю создавать новые способы решения проблем.", archetype: "Маг" },
    { text: "Иногда мне кажется, что я понимаю, как устроена Вселенная.", archetype: "Маг" },

    // Славный малый
    { text: "Я чувствую себя комфортно, когда меня принимают в коллективе.", archetype: "Славный малый" },
    { text: "Я стараюсь быть таким человеком, которому можно доверять.", archetype: "Славный малый" },
    { text: "Мне важно, чтобы в группе все были равны.", archetype: "Славный малый" },
    { text: "Я предпочитаю избегать конфликтов ради гармонии.", archetype: "Славный малый" },

    // Дитя
    { text: "Я нахожу радость в простых вещах, как будто вижу мир заново.", archetype: "Дитя" },
    { text: "Мне хочется верить, что большинство людей добры по природе.", archetype: "Дитя" },
    { text: "Я предпочитаю стабильность и предсказуемость.", archetype: "Дитя" },
    { text: "Безопасность для меня важнее всего.", archetype: "Дитя" },

    // Искатель
    { text: "Меня вдохновляет возможность открывать новые горизонты.", archetype: "Искатель" },
    { text: "Я предпочитаю свободу и самостоятельность во всём.", archetype: "Искатель" },
    { text: "Когда что-то становится рутиной, мне хочется перемен.", archetype: "Искатель" },
    { text: "Мне нравится исследовать новые идеи и возможности.", archetype: "Искатель" },

    // Творец
    { text: "Я люблю придумывать новые идеи и воплощать их в жизнь.", archetype: "Творец" },
    { text: "Я чувствую необходимость выразить себя через творчество.", archetype: "Творец" },
    { text: "Мне важно, чтобы результат моей работы был уникальным.", archetype: "Творец" },
    { text: "Я стремлюсь создать что-то, что останется после меня.", archetype: "Творец" },

    // Герой
    { text: "Я готов бороться за свои цели, несмотря на трудности.", archetype: "Герой" },
    { text: "Мне нравится, когда я могу быть примером для других.", archetype: "Герой" },
    { text: "Я чувствую себя сильным, когда преодолеваю испытания.", archetype: "Герой" },
    { text: "Я готов взять на себя ответственность за то, что другие боятся сделать.", archetype: "Герой" },

    // Бунтарь
    { text: "Я чувствую необходимость бороться с несправедливостью.", archetype: "Бунтарь" },
    { text: "Иногда я нарушаю правила, чтобы изменить ситуацию.", archetype: "Бунтарь" },
    { text: "Я предпочитаю идти против системы, если она не работает.", archetype: "Бунтарь" },
    { text: "Я верю, что разрушение старого может открыть дорогу новому.", archetype: "Бунтарь" },

    // Любовник
    { text: "Я ценю красоту и стремлюсь наполнить свою жизнь эстетикой.", archetype: "Любовник" },
    { text: "Мне важно иметь глубокие эмоциональные связи с людьми.", archetype: "Любовник" },
    { text: "Гармоничные отношения для меня — основа счастья.", archetype: "Любовник" },
    { text: "Я ищу страсть и романтику во всём, что делаю.", archetype: "Любовник" },

    // Шут
    { text: "Мне нравится развлекать людей и видеть их улыбки.", archetype: "Шут" },
    { text: "Я использую юмор, чтобы справляться со сложностями.", archetype: "Шут" },
    { text: "Я предпочитаю жить здесь и сейчас, а не строить долгосрочные планы.", archetype: "Шут" },
    { text: "Я умею находить весёлую сторону в любой ситуации.", archetype: "Шут" },

    // Опекун
    { text: "Забота о других делает меня счастливым.", archetype: "Опекун" },
    { text: "Я стараюсь создать комфорт и уют для своих близких.", archetype: "Опекун" },
    { text: "Мне важно знать, что я помог кому-то в сложной ситуации.", archetype: "Опекун" },
    { text: "Я готов жертвовать своими интересами ради других.", archetype: "Опекун" },

    // Правитель
    { text: "Я чувствую себя уверенно, когда управляю ситуацией.", archetype: "Правитель" },
    { text: "Для меня важен порядок и контроль.", archetype: "Правитель" },
    { text: "Я умею разрабатывать планы, которые приводят к успеху.", archetype: "Правитель" },
    { text: "Я верю, что хорошее лидерство может изменить мир.", archetype: "Правитель" },

    // Мудрец
    { text: "Я стремлюсь понять, как устроен мир.", archetype: "Мудрец" },
    { text: "Мне нравится анализировать происходящее и находить ответы.", archetype: "Мудрец" },
    { text: "Я считаю, что знание — это сила.", archetype: "Мудрец" },
    { text: "Люди часто приходят ко мне за советом, доверяя моему мнению.", archetype: "Мудрец" }
];

        const answers = [
            { emoji: "😄", label: "Это я", score: 2 },
            { emoji: "🙂", label: "Скорее я", score: 1 },
            { emoji: "😐", label: "Нейтрально", score: 0 },
            { emoji: "🙁", label: "Скорее не я", score: -1 },
            { emoji: "😡", label: "Не я", score: -2 },
        ];

    const totalPages = 12;
const questionsPerPage = 4;

let currentPage = 1;
let selectedAnswers = {};
let archetypeScores = archetypes.reduce((acc, archetype) => {
    acc[archetype] = 0;
    return acc;
}, {});

const shuffledQuestions = questions.sort(() => Math.random() - 0.5);

const startTest = () => {
    document.getElementById("test-overlay").style.display = "flex";
    updatePage();
};

   
const updatePage = () => {
    const start = (currentPage - 1) * questionsPerPage;
    const end = start + questionsPerPage;
    const currentQuestions = shuffledQuestions.slice(start, end);

    // Обновляем счётчик страниц
    document.getElementById("page-number").innerText = currentPage;

    // Очищаем контейнер вопросов
    const container = document.getElementById("questions-container");
    container.innerHTML = "";

    // Создаём блоки вопросов с вариантами ответов
    currentQuestions.forEach((question, index) => {
        const questionId = start + index;
        const questionElement = document.createElement("div");
        questionElement.classList.add("question");

        // Генерация вопроса с ответами
        questionElement.innerHTML = `
            <div>${question.text}</div>
            <div class="options">
                ${
                    answers
    .slice() // Создаём копию массива
    .sort((a, b) => a.score - b.score) // Сортируем от меньшего к большему
    .map(
        (answer) => `
            <div class="option ${selectedAnswers[questionId]?.score === answer.score ? "selected" : ""}" 
                 data-question-id="${questionId}" 
                 data-answer="${answer.score}" 
                 data-archetype="${question.archetype}">
                <div style="font-size: 1.5rem;">${answer.emoji}</div>
                <span>${answer.label}</span>
            </div>
        `
    )
    .join("")

                }
            </div>
        `;

        container.appendChild(questionElement);
    });

    // Добавляем обработчики кликов для вариантов ответа
    document.querySelectorAll(".option").forEach((option) => {
        option.addEventListener("click", () => {
            const questionId = option.dataset.questionId;
            const archetype = option.dataset.archetype;
            const score = parseInt(option.dataset.answer);

            // Обновляем выбранный ответ для текущего вопроса
            selectedAnswers[questionId] = { archetype, score };

            // Снимаем выделение со всех вариантов текущего вопроса
            document
                .querySelectorAll(`[data-question-id="${questionId}"]`)
                .forEach((opt) => opt.classList.remove("selected"));

            // Выделяем выбранный вариант
            option.classList.add("selected");

            // Проверяем, можно ли активировать кнопку "Далее" или "Получить результат"
            validatePage();
        });
    });

    // Обновляем кнопки навигации
    document.getElementById("prev-button").disabled = currentPage === 1;
    document.getElementById("next-button").style.display = currentPage < totalPages ? "inline-block" : "none";
    document.getElementById("result-button").style.display = currentPage === totalPages ? "inline-block" : "none";
    validatePage();
};

const validatePage = () => {
    const start = (currentPage - 1) * questionsPerPage;
    const end = start + questionsPerPage;
    const allAnswered = Array.from({ length: questionsPerPage }, (_, i) => start + i).every(
        (id) => selectedAnswers[id] !== undefined
    );

    if (currentPage === totalPages) {
        document.getElementById("result-button").disabled = !allAnswered;
    } else {
        document.getElementById("next-button").disabled = !allAnswered;
    }
};

const calculateResults = () => {
    // Сбрасываем накопленные баллы
    archetypeScores = archetypes.reduce((acc, archetype) => {
        acc[archetype] = 0;
        return acc;
    }, {});

    // Суммируем баллы только по текущим выбранным ответам
    for (const answer of Object.values(selectedAnswers)) {
        archetypeScores[answer.archetype] += answer.score;
    }

    // Находим максимальное количество баллов
    const maxScore = Math.max(...Object.values(archetypeScores));

    // Список архетипов с максимальными баллами
    const topArchetypes = Object.entries(archetypeScores)
        .filter(([_, score]) => score === maxScore)
        .map(([archetype]) => archetype);

    // Выбираем случайный основной архетип
    const primaryArchetype = topArchetypes[Math.floor(Math.random() * topArchetypes.length)];

    // Дополнительные архетипы — все кроме основного
    const additionalArchetypes = topArchetypes.filter((archetype) => archetype !== primaryArchetype);

    // Описание архетипов
  const descriptions = {
    "Маг": "Маги — это люди, которые верят в силу трансформации и перемен. Они умеют видеть скрытые связи и обладают способностью воплощать мечты в реальность. Их цель — не только изменить себя, но и вдохновить окружающих на поиск новых возможностей. Маги часто становятся лидерами, которых уважают за их уникальное видение и готовность рисковать ради великих целей.",
    "Славный малый": "Славные малые — это добродушные и открытые люди, для которых гармония и дружелюбие стоят на первом месте. Они стремятся объединять людей и создают атмосферу, в которой каждый чувствует себя комфортно. Это те, на кого можно положиться в любой ситуации, потому что их честность и искренность не вызывают сомнений.",
    "Дитя": "Дитя — это те, кто сохраняет оптимизм и способность видеть мир с удивлением. Они ищут безопасность и стабильность, находя радость в простых и понятных вещах. Их искренность и вера в добро делают их особенными, напоминая нам, что важно ценить моменты счастья.",
    "Искатель": "Искатели — это свободолюбивые личности, которые постоянно исследуют новые горизонты. Им важны перемены, самостоятельность и возможность открывать неизведанное. Они вдохновляют окружающих своей страстью к жизни и стремлением искать ответы на самые глубокие вопросы.",
    "Творец": "Творцы — это люди, которые видят мир через призму креативности и воображения. Они создают что-то уникальное, что может вдохновить других. Для них важно оставлять после себя наследие, выражая свою индивидуальность в каждом проекте или деле.",
    "Герой": "Герои — это воплощение смелости и решимости. Они преодолевают преграды, берут на себя ответственность и вдохновляют других своими действиями. Их девиз: 'Нет ничего невозможного'. Герои находят радость в борьбе и всегда готовы помочь тем, кто нуждается в защите.",
    "Бунтарь": "Бунтари — это те, кто бросает вызов устоям и ищет изменения. Они не боятся идти против правил, разрушая старое ради нового. Их энергия и страсть помогают другим увидеть мир по-другому и не бояться перемен.",
    "Любовник": "Любовники — это ценители красоты, глубоких отношений и страсти. Для них важна эмоциональная связь, гармония и романтика. Они стремятся наполнить свою жизнь эстетикой, делая каждый момент незабываемым.",
    "Шут": "Шуты — это оптимисты, которые умеют находить радость в любой ситуации. Они приносят смех, снимают напряжение и помогают другим взглянуть на жизнь с лёгкостью. Их игривость напоминает, что важно жить здесь и сейчас.",
    "Опекун": "Опекуны — это заботливые и внимательные личности, которые ставят интересы других выше своих. Они создают уют, обеспечивают защиту и помогают в трудные моменты. Для них важно быть полезными и нужными окружающим.",
    "Правитель": "Правители — это лидеры, которые умеют наводить порядок и организовывать окружающих. Они создают структуры и законы, благодаря которым всё работает эффективно. Их цель — поддерживать стабильность и помогать другим расти под их руководством.",
    "Мудрец": "Мудрецы — это те, кто стремится к знаниям и пониманию мира. Они анализируют происходящее, задают глубокие вопросы и помогают другим находить ответы. Их мудрость и проницательность делают их ценными советчиками и наставниками."
};


    const description = descriptions[primaryArchetype] || "Описание недоступно.";

    // Переход на страницу результатов с передачей данных
    window.location.href = `results.html?archetype=${encodeURIComponent(primaryArchetype)}&description=${encodeURIComponent(description)}&additional=${encodeURIComponent(additionalArchetypes.join(','))}`;
};


// Навигация по страницам
document.getElementById("prev-button").addEventListener("click", () => {
    if (currentPage > 1) {
        currentPage--;
        updatePage();
    }
});

document.getElementById("next-button").addEventListener("click", () => {
    if (currentPage < totalPages) {
        currentPage++;
        updatePage();
    }
});

document.getElementById("result-button").addEventListener("click", calculateResults);

// Начальное обновление
updatePage();

    </script>
</body>
</html>
