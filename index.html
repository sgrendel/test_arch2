<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Тест на определение Архетипа</title>
    <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* Общий стиль */
        body {
            font-family: 'Raleway', sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(180deg, #FFD1DC, #C3E8FF);
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        h1 {
            font-size: 2.5rem;
            margin-top: 20px;
            text-align: center;
        }

        .intro, .test-description {
            font-size: 1.2rem;
            line-height: 1.8;
            text-align: justify;
            margin-bottom: 1rem;
            width: 90%;
            max-width: 650px;
        }

        .start-btn {
            display: inline-block;
            background-color: #FFB6C1;
            color: #fff;
            text-decoration: none;
            font-size: 1.5rem;
            font-weight: 700;
            padding: 15px 30px;
            border-radius: 30px;
            transition: background-color 0.3s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            margin-bottom: 20px;
        }

        .start-btn:hover {
            background-color: #FFA6B8;
        }

        /* Модальная карточка */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: none; /* Скрыто до нажатия кнопки */
            justify-content: center;
            align-items: center;
            z-index: 10;
        }

        .test-card {
            background: #fff;
            border-radius: 20px;
            padding: 40px;
            width: 100%;
            max-width: 900px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
            text-align: center;
            position: relative;
        }

        /* Вопросы */
        .question > div:first-child {
            font-size: 1.2rem;
            font-weight: 400;
            margin-bottom: 10px;
        }

        .options {
            display: flex;
            justify-content: space-evenly;
            gap: 10px;
            flex-wrap: wrap;
        }

.option {
    display: flex;
    flex-direction: column;
    align-items: center;
    cursor: pointer;
    margin: 5px;
    padding: 10px;
    border: none; /* Убираем стандартные границы */
    border-bottom: 1px solid #ddd; /* Разделительная линия между вопросами */
    width: 90%; /* Опция занимает 90% ширины родителя */
    transition: border-color 0.3s ease, filter 0.3s ease;
}

.option:last-child {
    border-bottom: none; /* Убираем линию у последней опции */
}

.option div:first-child {
    font-size: 1.5rem; /* Размер смайлика */
    filter: grayscale(100%); /* Черно-белый эффект для смайликов */
    transition: filter 0.3s ease; /* Плавный переход на цветной */
}

.option.selected div:first-child {
    filter: none; /* Убираем черно-белый фильтр для выбранного */
}

.option span {
    font-size: 0.8rem; /* Размер подписи */
}


        /* Кнопки */
        .buttons {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
        }

        .button {
            background-color: #FFB6C1;
            color: #fff;
            font-size: 1rem;
            font-weight: 700;
            padding: 10px 20px;
            border-radius: 20px;
            border: none;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .button:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }

        .button:hover:not(:disabled) {
            background-color: #FFA6B8;
        }

        /* Счётчик страниц */
        .page-counter {
            font-size: 1rem;
            color: #666;
            margin-top: 10px;
            text-align: center;
            flex: 1;
        }

        /* Мобильные устройства */
        @media (max-width: 768px) {
            .test-card {
                padding: 20px;
            }

            .buttons {
                flex-direction: column;
                align-items: center;
            }

            .page-counter {
                order: 1;
                width: 100%;
            }

            .options {
                justify-content: center;
            }
        }
    </style>
</head>
<body>
   <p></p>
    <h1>Определи свой Архетип!</h1>
    <div class="intro">
        <p>Архетипы — это универсальные образы и сценарии, живущие в каждом из нас. Они определяют наши мотивы, выборы и способы взаимодействия с миром. Зная свой архетип, вы сможете понять, что вдохновляет вас и как лучше реализовать свой потенциал.</p>
    </div>
    <div class="test-description">
        <p>Наш тест включает 48 вопросов, которые помогут раскрыть ваши глубинные архетипы. Готовы? Начнём прямо сейчас!</p>
    </div>
    <button class="start-btn" onclick="startTest()">Начать тест</button>

    <div class="overlay" id="test-overlay">
        <div class="test-card">
            <div id="questions-container"></div>
            <div class="buttons">
                <button class="button" id="prev-button" disabled>Назад</button>
                <span class="page-counter">Страница <span id="page-number">1</span> из 12</span>
                <button class="button" id="next-button" disabled>Далее</button>
                <button class="button" id="result-button" style="display: none;" disabled>Получить результат</button>
            </div>
        </div>
    </div>

    <script>
        const archetypes = [
            "Маг",
            "Славный малый",
            "Дитя",
            "Искатель",
            "Творец",
            "Герой",
            "Бунтарь",
            "Любовник",
            "Шут",
            "Опекун",
            "Правитель",
            "Мудрец",
        ];

     const questions = [
    // Маг
    { text: "Я верю, что могу влиять на свою судьбу.", archetype: "Маг" },
    { text: "Мне нравится помогать другим людям видеть скрытые возможности.", archetype: "Маг" },
    { text: "Я люблю создавать новые способы решения проблем.", archetype: "Маг" },
    { text: "Иногда мне кажется, что я понимаю, как устроена Вселенная.", archetype: "Маг" },

    // Славный малый
    { text: "Я чувствую себя комфортно, когда меня принимают в коллективе.", archetype: "Славный малый" },
    { text: "Я стараюсь быть таким человеком, которому можно доверять.", archetype: "Славный малый" },
    { text: "Мне важно, чтобы в группе все были равны.", archetype: "Славный малый" },
    { text: "Я предпочитаю избегать конфликтов ради гармонии.", archetype: "Славный малый" },

    // Дитя
    { text: "Я нахожу радость в простых вещах, как будто вижу мир заново.", archetype: "Дитя" },
    { text: "Мне хочется верить, что большинство людей добры по природе.", archetype: "Дитя" },
    { text: "Я предпочитаю стабильность и предсказуемость.", archetype: "Дитя" },
    { text: "Безопасность для меня важнее всего.", archetype: "Дитя" },

    // Искатель
    { text: "Меня вдохновляет возможность открывать новые горизонты.", archetype: "Искатель" },
    { text: "Я предпочитаю свободу и самостоятельность во всём.", archetype: "Искатель" },
    { text: "Когда что-то становится рутиной, мне хочется перемен.", archetype: "Искатель" },
    { text: "Мне нравится исследовать новые идеи и возможности.", archetype: "Искатель" },

    // Творец
    { text: "Я люблю придумывать новые идеи и воплощать их в жизнь.", archetype: "Творец" },
    { text: "Я чувствую необходимость выразить себя через творчество.", archetype: "Творец" },
    { text: "Мне важно, чтобы результат моей работы был уникальным.", archetype: "Творец" },
    { text: "Я стремлюсь создать что-то, что останется после меня.", archetype: "Творец" },

    // Герой
    { text: "Я готов бороться за свои цели, несмотря на трудности.", archetype: "Герой" },
    { text: "Мне нравится, когда я могу быть примером для других.", archetype: "Герой" },
    { text: "Я чувствую себя сильным, когда преодолеваю испытания.", archetype: "Герой" },
    { text: "Я готов взять на себя ответственность за то, что другие боятся сделать.", archetype: "Герой" },

    // Бунтарь
    { text: "Я чувствую необходимость бороться с несправедливостью.", archetype: "Бунтарь" },
    { text: "Иногда я нарушаю правила, чтобы изменить ситуацию.", archetype: "Бунтарь" },
    { text: "Я предпочитаю идти против системы, если она не работает.", archetype: "Бунтарь" },
    { text: "Я верю, что разрушение старого может открыть дорогу новому.", archetype: "Бунтарь" },

    // Любовник
    { text: "Я ценю красоту и стремлюсь наполнить свою жизнь эстетикой.", archetype: "Любовник" },
    { text: "Мне важно иметь глубокие эмоциональные связи с людьми.", archetype: "Любовник" },
    { text: "Гармоничные отношения для меня — основа счастья.", archetype: "Любовник" },
    { text: "Я ищу страсть и романтику во всём, что делаю.", archetype: "Любовник" },

    // Шут
    { text: "Мне нравится развлекать людей и видеть их улыбки.", archetype: "Шут" },
    { text: "Я использую юмор, чтобы справляться со сложностями.", archetype: "Шут" },
    { text: "Я предпочитаю жить здесь и сейчас, а не строить долгосрочные планы.", archetype: "Шут" },
    { text: "Я умею находить весёлую сторону в любой ситуации.", archetype: "Шут" },

    // Опекун
    { text: "Забота о других делает меня счастливым.", archetype: "Опекун" },
    { text: "Я стараюсь создать комфорт и уют для своих близких.", archetype: "Опекун" },
    { text: "Мне важно знать, что я помог кому-то в сложной ситуации.", archetype: "Опекун" },
    { text: "Я готов жертвовать своими интересами ради других.", archetype: "Опекун" },

    // Правитель
    { text: "Я чувствую себя уверенно, когда управляю ситуацией.", archetype: "Правитель" },
    { text: "Для меня важен порядок и контроль.", archetype: "Правитель" },
    { text: "Я умею разрабатывать планы, которые приводят к успеху.", archetype: "Правитель" },
    { text: "Я верю, что хорошее лидерство может изменить мир.", archetype: "Правитель" },

    // Мудрец
    { text: "Я стремлюсь понять, как устроен мир.", archetype: "Мудрец" },
    { text: "Мне нравится анализировать происходящее и находить ответы.", archetype: "Мудрец" },
    { text: "Я считаю, что знание — это сила.", archetype: "Мудрец" },
    { text: "Люди часто приходят ко мне за советом, доверяя моему мнению.", archetype: "Мудрец" }
];

        const answers = [
            { emoji: "😄", label: "Это я", score: 2 },
            { emoji: "🙂", label: "Скорее я", score: 1 },
            { emoji: "😐", label: "Нейтрально", score: 0 },
            { emoji: "🙁", label: "Скорее не я", score: -1 },
            { emoji: "😡", label: "Не я", score: -2 },
        ];

        const totalPages = 12;
        const questionsPerPage = 4;

        let currentPage = 1;
        let selectedAnswers = {};
        let archetypeScores = archetypes.reduce((acc, archetype) => {
            acc[archetype] = 0;
            return acc;
        }, {});

        const shuffledQuestions = questions.sort(() => Math.random() - 0.5);

        const startTest = () => {
            document.getElementById("test-overlay").style.display = "flex";
            updatePage();
        };

 const updatePage = () => {
    const start = (currentPage - 1) * questionsPerPage;
    const end = start + questionsPerPage;
    const currentQuestions = shuffledQuestions.slice(start, end);

    // Обновляем счётчик страниц
    document.getElementById("page-number").innerText = currentPage;

    // Очищаем контейнер вопросов
    const container = document.getElementById("questions-container");
    container.innerHTML = "";

    // Создаём блоки вопросов с вариантами ответов
    currentQuestions.forEach((question, index) => {
        const questionId = start + index;
        const questionElement = document.createElement("div");
        questionElement.classList.add("question");

        // Генерация вопроса с ответами
        questionElement.innerHTML = `
            <div>${question.text}</div>
            <div class="options">
                ${answers
                    .slice() // Создаём копию массива ответов
                    .reverse() // Меняем порядок на обратный
                    .map(
                        (answer) => `
                    <div class="option ${selectedAnswers[questionId]?.score === answer.score ? "selected" : ""}" 
                         data-question-id="${questionId}" 
                         data-answer="${answer.score}" 
                         data-archetype="${question.archetype}">
                        <div style="font-size: 1.5rem;">${answer.emoji}</div>
                        <span>${answer.label}</span>
                    </div>
                `
                    )
                    .join("")}
            </div>
        `;

        container.appendChild(questionElement);
    });

    // Добавляем обработчики кликов для вариантов ответа
    document.querySelectorAll(".option").forEach((option) => {
        option.addEventListener("click", () => {
            const questionId = option.dataset.questionId;
            const archetype = option.dataset.archetype;
            const score = parseInt(option.dataset.answer);

            // Снимаем выделение со всех вариантов для текущего вопроса
            document
                .querySelectorAll(`[data-question-id="${questionId}"]`)
                .forEach((opt) => opt.classList.remove("selected"));

            // Выделяем выбранный вариант
            option.classList.add("selected");
            selectedAnswers[questionId] = { archetype, score };

            // Проверяем, можно ли активировать кнопку "Далее" или "Получить результат"
            validatePage();
        });
    });

    // Обновляем кнопки навигации
    document.getElementById("prev-button").disabled = currentPage === 1;
    document.getElementById("next-button").style.display = currentPage < totalPages ? "inline-block" : "none";
    document.getElementById("result-button").style.display = currentPage === totalPages ? "inline-block" : "none";
    validatePage();
};

        const validatePage = () => {
            const start = (currentPage - 1) * questionsPerPage;
            const end = start + questionsPerPage;
            const allAnswered = Array.from({ length: questionsPerPage }, (_, i) => start + i).every(
                (id) => selectedAnswers[id] !== undefined
            );

            if (currentPage === totalPages) {
                document.getElementById("result-button").disabled = !allAnswered;
            } else {
                document.getElementById("next-button").disabled = !allAnswered;
            }
        };

        const calculateResults = () => {
            for (const answer of Object.values(selectedAnswers)) {
                archetypeScores[answer.archetype] += answer.score;
            }

            const dominantArchetype = Object.entries(archetypeScores).reduce((max, current) => {
                return current[1] > max[1] ? current : max;
            });

            alert(`Ваш основной архетип: ${dominantArchetype[0]} (${dominantArchetype[1]} баллов).`);
        };

        document.getElementById("prev-button").addEventListener("click", () => {
            if (currentPage > 1) {
                currentPage--;
                updatePage();
            }
        });

        document.getElementById("next-button").addEventListener("click", () => {
            if (currentPage < totalPages) {
                currentPage++;
                updatePage();
            }
        });

        document.getElementById("result-button").addEventListener("click", calculateResults);

        updatePage();
    </script>
</body>
</html>
